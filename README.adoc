# FTGO Kubernetes Deployment Demo

## ğŸ“Œ Giá»›i thiá»‡u

Dá»± Ã¡n nÃ y lÃ  báº£n **demo triá»ƒn khai (deployment) báº±ng Kubernetes** Ä‘Æ°á»£c tÃ´i chá»‰nh sá»­a tá»« dá»± Ã¡n gá»‘c **FTGO Application** ([microservices-patterns/ftgo-application](https://github.com/microservices-patterns/ftgo-application)).\
VÃ¬ dá»± Ã¡n gá»‘c Ä‘Ã£ Ä‘Æ°á»£c code tá»« lÃ¢u, nÃªn tÃ´i Ä‘Ã£ **cáº­p nháº­t láº¡i cÃ¡c cáº¥u hÃ¬nh** sao cho phÃ¹ há»£p vá»›i hiá»‡n táº¡i (nÄƒm 2025).

## ğŸ›  CÃ´ng nghá»‡ sá»­ dá»¥ng

- **Java 8+** (Spring Boot, Spring Cloud)
- **Docker & Docker Compose**
- **Kubernetes**
- **MySQL, Kafka, Zookeeper, DynamoDB**

---

## ğŸš€ CÃ i Ä‘áº·t & Cháº¡y á»©ng dá»¥ng

### 1ï¸âƒ£ **Clone dá»± Ã¡n**

```bash
git clone https://github.com/bisosad1501/ftgo-kubernetes_deploy.git
cd ftgo-kubernetes_deploy
```

### 2ï¸âƒ£ **Build dá»± Ã¡n**

```bash
./gradlew assemble
```

### 3ï¸âƒ£ **Cháº¡y á»©ng dá»¥ng báº±ng Docker Compose**

```bash
./gradlew :composeUp
```

Cháº¡y xong, báº¡n cÃ³ thá»ƒ truy cáº­p Swagger UI Ä‘á»ƒ thá»­ API:

- Consumer: [http://localhost:8081/swagger-ui/index.html](http://localhost:8081/swagger-ui/index.html)
- Restaurant: [http://localhost:8084/swagger-ui/index.html](http://localhost:8084/swagger-ui/index.html)
- Order: [http://localhost:8082/swagger-ui/index.html](http://localhost:8082/swagger-ui/index.html)
- Order History: [http://localhost:8086/swagger-ui/index.html](http://localhost:8086/swagger-ui/index.html)

---

## ğŸ° Triá»ƒn khai vá»›i Kubernetes

### 1ï¸âƒ£ **CÃ i Ä‘áº·t Minikube hoáº·c Kubernetes trÃªn Docker Desktop**

Náº¿u dÃ¹ng Minikube:

```bash
minikube start
```

### 2ï¸âƒ£ **Triá»ƒn khai toÃ n bá»™ dá»‹ch vá»¥**

```bash
./deployment/kubernetes/scripts/kubernetes-deploy-all.sh
```

### 3ï¸âƒ£ **Kiá»ƒm tra tráº¡ng thÃ¡i Pod**

```bash
kubectl get pods -n default
```

### 4ï¸âƒ£ **Gá»i API sau khi deploy**

Sau khi triá»ƒn khai thÃ nh cÃ´ng, báº¡n cÃ³ thá»ƒ truy cáº­p API thÃ´ng qua **Ingress Controller** hoáº·c **NodePort** (tÃ¹y cáº¥u hÃ¬nh).

Kiá»ƒm tra service:

```bash
kubectl get svc
```

Náº¿u dá»‹ch vá»¥ cÃ³ `NodePort`, báº¡n cÃ³ thá»ƒ truy cáº­p qua Ä‘á»‹a chá»‰:

```
http://<NODE_IP>:<NODE_PORT>
```

---

## â›” Gá»¡ cÃ i Ä‘áº·t & Dá»n dáº¹p

### 1ï¸âƒ£ **Dá»«ng dá»‹ch vá»¥ cháº¡y trÃªn Docker Compose**

```bash
./gradlew :composeDown
```

### 2ï¸âƒ£ **Gá»¡ deployment trÃªn Kubernetes**

```bash
./deployment/kubernetes/scripts/kubernetes-delete-all.sh
```

### 3ï¸âƒ£ **XÃ³a Persistent Volumes (Kafka, Zookeeper, MySQL) náº¿u cáº§n**

```bash
./deployment/kubernetes/scripts/kubernetes-delete-volumes.sh
```

---

## ğŸ’ Ghi chÃº

- VÃ¬ dá»± Ã¡n gá»‘c Ä‘Ã£ lÃ¢u nÃªn má»™t sá»‘ cáº¥u hÃ¬nh khÃ´ng cÃ²n phÃ¹ há»£p. PhiÃªn báº£n nÃ y Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t láº¡i cÃ¡c cáº¥u hÃ¬nh vÃ  cÃ¡c file Kubernetes YAML.
- Náº¿u dÃ¹ng **Docker Toolbox hoáº·c Minikube**, cÃ³ thá»ƒ cáº§n thay `localhost` báº±ng `DOCKER_HOST_IP`.
- Náº¿u gáº·p lá»—i vá»›i Kubernetes, kiá»ƒm tra logs báº±ng:
  ```bash
  kubectl logs <POD_NAME> -n default
  ```

ChÃºc báº¡n triá»ƒn khai thÃ nh cÃ´ng! ğŸš€ğŸš€ğŸš€

